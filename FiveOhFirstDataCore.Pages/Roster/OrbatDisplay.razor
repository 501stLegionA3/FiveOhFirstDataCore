@inject IRosterService _roster

@if(Data is not null)
{
    <table class="table table-striped">
        <HailstormDisplay Hailstorm="Data.Hailstorm" Single="false" />
        <CompanyDisplay Company="Data.Avalanche" Name="Avalanche" />
        <CompanyDisplay Company="Data.Cyclone" Name="Cyclone" />
        <CompanyDisplay Company="Data.Acklay" Name="Acklay" Airborne="true" />
        <MynockDisplay Mynock="Data.Mynock" />
        <RazorDisplay Razor="Data.Razor" />
    </table>
}
else
{
    <em>Loading...</em>
}

@code {
    public OrbatData Data { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);

        if (firstRender)
        {
            Data = await _roster.GetOrbatDataAsync();
            StateHasChanged();
        }
    }
}
